{
    "contents" : "#'Read in BBS Relative Abundance Shapefile\n#'\n#'@param SpeciesCode = x - vector of species alpha codes\n#'@return returns a shapefile with relative abundance information; \n#'if more than one alpha code is supplied returns a list of shapfiles named\n#'with the alpha code\n#'@usage data(Birds)\n#'@export\nBBSmap<-function(SpeciesCode,MakeRaster=TRUE){\n  data(Birds)\n  x<-SpeciesCode\n  y<-destfile<-exdir<-rep(NA,length(x))  \n  shapes<-extentShape<-rastShape<-rastEmpty<-vector('list',length(x))\n  for(i in 1:length(x)){\n    if(x[i] %in% Birds[,4]==FALSE) print(\"Alpha Code not in list\")\n    y[i]<-sprintf(\"%05d\",Birds[grep(Birds[,4],pattern=x[i]),2])   \n    # Download the shapefile to working directory with name CODE.zip#\n    destfile[i]<-paste(getwd(),\"/\",x[i],\".zip\",sep=\"\")\n    download.file(paste(\"http://www.mbr-pwrc.usgs.gov/bbs/ra12/ra\",y[i],\".zip\",sep=\"\"),destfile=destfile[i],mode=\"wb\")\n    exdir[i]<-paste(getwd(),\"/\",x[i],\"_unzip\",sep=\"\")\n    unzip(paste(x[i],\".zip\",sep=\"\"),exdir=exdir[i])\n    shapes[[i]]<-raster::shapefile(paste(exdir[i],\"/\",\"ra\",y[i],\".shp\",sep=\"\"))\n    if(MakeRaster==FALSE){break} else {\n    extentShape[[i]]<-raster::extent(shapes[[i]])\n    rastEmpty[[i]]<-raster::raster(xmn=extentShape[[i]][1],\n                                   xmx=extentShape[[i]][2],\n                                   ymn=extentShape[[i]][3],\n                                   ymx=extentShape[[i]][4], \n                                   crs=(\"+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0\"),\n                                   resolution=c(10000,10000)) #10km res\n    print(paste(\"Creating Raster for\",x[i],sep=\" \"))\n    rastShape[[i]]<-raster::rasterize(shapes[[i]],rastEmpty[[i]],shapes[[i]]$RASTAT)                                 \n    } \n  }\n  if(MakeRaster==FALSE){names(shapes)<-c(x)\n                        if(length(shapes)==1){ return(shapes[[1]])} else { return(shapes)}}\n  else{\n  names(rastShape)<-c(x)\n  if(length(rastShape)==1){ return(rastShape[[1]])} else {return(rastShape)}\n  } \n  }\n\n",
    "created" : 1438697538961.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4030492357",
    "id" : "47EFE948",
    "lastKnownWriteTime" : 1440474467,
    "path" : "G:/Google_Drive/BBS_shapefile/R/BBSmap.R",
    "project_path" : "R/BBSmap.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}