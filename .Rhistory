plot(PUMA)
plot(PUMA[1])
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE)
plot(PUMA)
str(PUMA)
PUMA[[1]]
plot(PUMA[[1]])
PUMA[[2]]
Plot(PUMA[[1]])
plot(PUMA[[1]])
str(PUMA[[1]])
head(PUMA[[1]])
BBSmap<-function(SpeciesCode,MakeRaster=TRUE,RelAbun=FALSE,res=10000,SnapToH2=FALSE){
data(Birds)
x<-SpeciesCode
y<-destfile<-exdir<-rep(NA,length(x))
shapes<-extentShape<-rastShape<-rastEmpty<-RelAbundance<-vector('list',length(x))
for(i in 1:length(x)){
if(x[i] %in% Birds[,4]==FALSE) print("Alpha Code not in list")
y[i]<-sprintf("%05d",Birds[grep(Birds[,4],pattern=x[i]),2])
# Download the shapefile to working directory with name CODE.zip#
destfile[i]<-paste(getwd(),"/",x[i],".zip",sep="")
download.file(paste("http://www.mbr-pwrc.usgs.gov/bbs/ra12/ra",y[i],".zip",sep=""),destfile=destfile[i],mode="wb")
exdir[i]<-paste(getwd(),"/",x[i],"_unzip",sep="")
unzip(paste(x[i],".zip",sep=""),exdir=exdir[i])
shapes[[i]]<-raster::shapefile(paste(exdir[i],"/","ra",y[i],".shp",sep=""))
names(shapes)<-c(x)
if(MakeRaster==FALSE){break} else {
extentShape[[i]]<-raster::extent(shapes[[i]])
rastEmpty[[i]]<-raster::raster(xmn=extentShape[[i]][1],
xmx=extentShape[[i]][2],
ymn=extentShape[[i]][3],
ymx=extentShape[[i]][4],
crs=("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0"),
resolution=c(res,res)) #10km res
print(paste("Creating Raster for",x[i],"with",res/1000,"km cell size",sep=" "))
rastShape[[i]]<-raster::rasterize(shapes[[i]],rastEmpty[[i]],shapes[[i]]$RASTAT)
}
names(rastShape)<-c(x)
if(RelAbun==FALSE){break} else {
print(paste("Creating Probability surface for",x[i],sep=" "))
RelAbundance[[i]]<-raster::calc(rastShape[[i]],fun=function(x){x/raster::cellStats(rastShape[[i]],sum)})
}
}
if(MakeRaster==FALSE){
if(length(shapes)==1){ return(shapes[[1]])}
else {return(shapes)}
}
if(RelAbun==FALSE){
if(length(rastShape)==1){ return(rastShape[[1]])}
else {return(rastShape)}
}
else{ if(length(RelAbundance)==1){return(RelAbundance[[1]])} else {return(RelAbundance)}
}
}
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE,RelAbun=TRUE)
plot(PUMA)
plot(PUMA[[1]])
PUMA[[1]]
plot(PUMA[[1]])
load("G:/Google_Drive/BBS_shapefile/data/MeanAnnualPrecip.RData")
MAD
plot(MAD)
extent(MAD)
library(raster)
plot(PUMA[[1]])
plot(MAD)
plot(PUMA[[1]],add=TRUE)
plot(PUMA[[1]])
plot(MAD,add=TRUE)
plot(PUMA[[1]],add=TRUE)
PUMA[[1]]
MAD
plot(MAD)
plot(PUMA)
MAD
extent(MAD,c(-11653283, 11656717, -1713934, 12646066)
)
resample(MAD,PUMA)
work<-resample(MAD,PUMA)
plot(work)
plot(PUMA,add=TRUE)
overlay(PUMA,MAD,fun=function(x,y){return(x*y)})
clip(work,PUMA)
mask(work,PUMA)
masT<-mask(work,PUMA)
plot(masT)
masT
PUMA
load("G:/Google_Drive/BBS_shapefile/data/Birds.RData")
Birds
MAD
Birds
Birds
devtools::load_all(".")
load("G:/Google_Drive/BBS_shapefile/data/Birds.RData")
Birds<-"G:/Google_Drive/BBS_shapefile/data/Birds.RData")
Birds<-("G:/Google_Drive/BBS_shapefile/data/Birds.RData")
load("G:/Google_Drive/BBS_shapefile/data/Birds.RData")
Birds
Birds
load("data/Birds.RData")
load("G:/Google_Drive/BBS_shapefile/data/Birds.RData")
data(Birds)
Birds
Birds<-load("data/Birds.RData")
update.packages("roxygen2")
update.packages("devtools")
library(BBSShapefile)
library(BBSshapefile)
MeanAnnualPrecip<-load("data/MeanAnnualPrecip.RData")
plot(MeanAnualPrecip)
MeanAnnualPrecip<-load("data/MeanAnnualPrecip.RData")
MeanAnnualPrecip
MeanAnnualPrecip$MAD
MeanAnnualPrecip
str(MeanAnnualPrecip)
raster("data/meanannualprecip.txt")
raster("data/meanannualprecip.txt")
MeanAnnualPrecip<-raster::raster("data/meanannualprecip.txt")
plot(MeanAnnualPrecip)
#'
MeanAnnualPrecip<-raster::raster("../data/meanannualprecip.txt")
MeanAnnualPrecip<-raster::raster("./data/meanannualprecip.txt")
remove(list(ls()))
remove(list=ls())
ls()
read.table("data/meanannualprecip.txt")
ls()
MeanAnnualPrecip<-read.table("data/meanannualprecip.txt")
raster(MeanAnnualPrecip)
head(MeanAnnualPrecip)
remove(list=ls())
MeanAnnualPrecip<-raster("data/meanannualprecip.txt")
save("MeanAnnualPrecip.Rdata")
save(MeanAnnalPrecip,file="data/MeanAnnualPrecip.RData")
MeanAnnualPrecip<-raster("data/meanannualprecip.txt")
ls()
save(MeanAnnualPrecip,file="data/MeanAnnualPrecip.RData")
load("G:/Google_Drive/BBS_shapefile/data/MeanAnnualPrecip.RData")
MAD<-load("data/MeanAnnualPrecip.RData")
plot(MAD)
MAD
str(MAD)
plot(MeanAnnualPrecip)
raster("data/mad.txt")
raster("data/mad.txt")
MAD<-raster("data/mad.txt")
MAD<-readAll(MAD)
MAD
remove(list=ls())
ls()
MAD<-raster("data/mad.txt")
MAD
MAD<-readAll(MAD)
MAD
save(MAD,"data/MAD.RData")
save.image("data/MAD.RData")
remove(list=ls())
ls()
md<-load("data/MAD.RData")
plot(md)
md
MAD<-raster("data/mad.txt")
MAD<-readAll(MAD)
plot(MAD)
writeRaster(MAD,"data/MAD.asc")
remove(list=ls())
MAD<-raster("data/MAD.asc")
plot(MAD)
MAD
readAll(MAD)
MAD<-readAll(MAD)
raster("../data/MAD.asc")
raster("G:/Google_Drive/BBS_shapefile/data/MAD.asc")
"MAD"
MAD<-raster()
MAD<-raster("G:/Google_Drive/BBS_shapefile/data/MAD.asc")
print(paste(expression("Snapping probability surface of",x[i],"to H",^2,"map")))
expression("Snapping probability surface of",x[i],"to H",^2,"map")
print(paste(parse("Snapping probability surface of",x[i],"to H",^2,"map")))
print(paste("Snapping probability surface of",x[i],"to H",^2,"map"))
print(paste("Snapping probability surface of",x[i],"to H^2 map"))
system.file("extdata","MAD.asc",package="BBSshapefile")
system.file("inst/extdata","MAD.asc",package="BBSshapefile")
system.file("inst/extdata","MAD.asc",package="BBSshapefile")
system.file("inst/extdata","MAD.asc")
system.file("extdata","MAD.asc",package="BBS")
system.file("extdata","MAD.asc",package="BBS_shapefile")
remove(list=ls())
ls()
library(BBSshapefile)
BBSmap
BBSmap(speciesCode="OVEN",MakeRaster=TRUE,SnapToH2=TRUE)
BBSmap(SpeciesCode="OVEN",MakeRaster=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BBSmap(SpeciesCode="OVEN",MakeRaster=TRUE,SnapToH2=TRUE)
system.file("extdata","MAD.asc",package="BBS_shapefile")
system.file("extdata","MAD.asc",package="BBSshapefile")
library(BBSshapefile)
BBSmap(SpeciesCode="OVEN",MakeRaster=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
Birds
BBSmap(SpeciesCode="OVEN",SnapToH2=TRUE)
print(paste("Snapping probability surface of",x[i],"to deuterium map"))
library(BBSshapefile)
library(BBSshapefile)
OVEN<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
raster(system.file("extdata","MAD.asc",package="BBSshapefile"),crs="+proj=longlat +ellps=WGS84 +towgs84=0.000,0.000,0.000 +no_defs")
raster::raster(system.file("extdata","MAD.asc",package="BBSshapefile"),crs="+proj=longlat +ellps=WGS84 +towgs84=0.000,0.000,0.000 +no_defs")
MAD<-raster::raster(system.file("extdata","MAD.asc",package="BBSshapefile"),crs="+proj=longlat +ellps=WGS84 +towgs84=0.000,0.000,0.000 +no_defs")
MAD<-raster::projectRaster(MAD,crs("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0"),
res=c(res,res))
MAD<-raster::projectRaster(MAD,crs="+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0",
res=c(res,res))
MAD<-raster::projectRaster(MAD,crs="+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0",
resolution=c(res,res))
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
BTBW
md<-raster(system.file("extdata","MAD.asc",package="BBSshapefile"),crs="+proj=longlat +ellps=WGS84 +towgs84=0.000,0.000,0.000 +no_defs")
MAD<-raster::projectRaster(md,crs="+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0")
plot(BTBW)
BTBW
plot(BTBW)
plot(MAD,add=TRUE)
library(BBSshapefile)
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(PUMA)
library(BBSshapefile)
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
library(rgdal)
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
library(raster)
library(rgdal)
GWWA<-BBSmap(SpeciesCode="GWWA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
GWWA
plot(GWWA)
plot(MAD)
remove(list=ls())
ls()
GWWA<-BBSmap(SpeciesCode="GWWA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
library(raster)
library(rgdal)
GWWA<-BBSmap(SpeciesCode="GWWA",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(MAD)
plot(GWWA)
library(BBSshapefile)
ls()
remove(list=ls())
MALL<-BBSmap(SpeciesCode="MALL",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(MALL)
BLPW<-BBSmap(SpeciesCode="BLPW",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(BLPW)
library(BBSshapefile)
OSFL<-BBSmap(SpeciesCode="OSFL",MakeRaster=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
OSFL<-BBSmap(SpeciesCode="OSFL",MakeRaster=TRUE,SnapToH2=TRUE)
plot(OSFL)
library(BBSshapefile)
OVEN<-BBSmap(SpeciesCode="OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(OVEN)
str(OVE)
str(OVEN)
OVEN
plotBBS<-function(BBSdata,NA_map=TRUE,States=TRUE,legend=TRUE,horizontal=TRUE){
if(NA_map=FALSE){NA_map<-NULL}
else{NAmap<-shapefile(system.file("extdata","world.shp",package="BBSshapefile"))}
if(States=FALSE){States<-NULL}
else{states<-shapefile(system.file("extdata","states.shp",package="BBSshapefile"))}
par(mfrow=c(ceiling(length(BBSdata)/2),ceiling(length(BBSdata)/2)))
set.breaks<-seq(0,raster::cellStats(BBSdata[[1]],max),raster::cellStats(BBSdata[[1]],max)/100)
raster::plot(BBSdata[[1]],
legend=legend,
horiz=horizontal,
breaks=set.breaks,
col=RColorBrewer::brewer.pal(8.75,"reds")(length(set.breaks)),
main=BBSdata[[1]])
}
plotBBS<-function(BBSdata,NA_map=TRUE,States=TRUE,legend=TRUE,horizontal=TRUE){
if(NA_map==FALSE){NA_map<-NULL}
else{NAmap<-shapefile(system.file("extdata","world.shp",package="BBSshapefile"))}
if(States==FALSE){States<-NULL}
else{states<-shapefile(system.file("extdata","states.shp",package="BBSshapefile"))}
par(mfrow=c(ceiling(length(BBSdata)/2),ceiling(length(BBSdata)/2)))
set.breaks<-seq(0,raster::cellStats(BBSdata[[1]],max),raster::cellStats(BBSdata[[1]],max)/100)
raster::plot(BBSdata[[1]],
legend=legend,
horiz=horizontal,
breaks=set.breaks,
col=RColorBrewer::brewer.pal(8.75,"reds")(length(set.breaks)),
main=BBSdata[[1]])
}
plotBBS(OVEN)
plotBBS<-function(BBSdata,NA_map=TRUE,States=TRUE,legend=TRUE,horizontal=TRUE){
if(NA_map==FALSE){NA_map<-NULL}
else{NAmap<-raster::shapefile(system.file("extdata","world.shp",package="BBSshapefile"))}
if(States==FALSE){States<-NULL}
else{states<-raster::shapefile(system.file("extdata","states.shp",package="BBSshapefile"))}
par(mfrow=c(ceiling(length(BBSdata)/2),ceiling(length(BBSdata)/2)))
set.breaks<-seq(0,raster::cellStats(BBSdata[[1]],max),raster::cellStats(BBSdata[[1]],max)/100)
raster::plot(BBSdata[[1]],
legend=legend,
horiz=horizontal,
breaks=set.breaks,
col=RColorBrewer::brewer.pal(8.75,"reds")(length(set.breaks)),
main=BBSdata[[1]])
}
plotBBS(OVEN)
library(BBSshapefile)
plot(OVEN)
plotBBS(OVEN)
library(BBSshapefile)
library(BBSshapefile)
plotBBS(BBSdata=OVEN)
library(BBSshapefile)
plotBBS(BBSdata=OVEN)
library(BBSshapefile)
plot(OVEN)
OVEN
plot(OVEN)
BBSmap(SpeciesCode="PUMA")
plotBBS(PUMA)
puma<-BBSmap(SpeciesCode="PUMA")
plot(puma)
plot(puma)
plotBBS(puma)
set.breaks<-seq(0,raster::cellStats(puma[[1]],max),raster::cellStats(puma[[1]],max)/100)
set.breaks<-seq(0,raster::cellStats(puma[[1]],max),raster::cellStats(puma[[1]],max)/100)
plot(puma,
breaks=set.breaks)
plot(BBSdata[[1]],
plot(puma,
breaks=set.breaks)
plot(puma,
breaks=set.breaks)
library(BBSshapefile)
library(BBSshapefile)
system.file("extdata","world.shp",package="BBSshapefile")
world<-system.file("extdata","world.shp",package="BBSshapefile")
states<-system.file("extdata","states.shp",package="BBSshapefile")
shapefile(world)
shapefile(states)
plot(shapefile(states))
plot(shapefile(world),add=TRUE)
plot(puma,add=TRUE)
plot(puma)
plot(shapefile(world),add=TRUE)
library(BBSshapefile)
library(BBSshapefile)
library(BBSshapefile)
library(BBSshapefile)
library(BBSshapefile)
TV<-BBSmap(SpeciesCode="TUVU",MakeRaster=TRUE)
str(TV)
TV
plot(TV)
library(raster)
plot(TV)
library(BBSshapefile)
World<-readBorders(Countries=TRUE)
plot(World)
library(raster)
plot(World)
Both<-readBorders(States=TRUE)
Both
plot(Both[[2]])
library(BBSshapefile)
America<-readBorders()
plot(America)
library(raster)
plot(America)
library(BBSshapefile)
library(raster)
getH2map()
plot(getH2map())
library(BBSshapefile)
library(raster)
getH2map()
library(BBSshapefile)
library(raster)
getH2map()
plot(getH2map())
NAmap<-getH2map()
NAmap
PUMA<-BBSmap(SpeciesCode="PUMA",MakeRaster=TRUE)
OVEN<-BBSmap(SpeciesCode="OVEN")
library(BBSshapefile)
BTBW<-BBSmap(SpeciesCode="BTBW")
MAD<-getH2map()
library(raster)
plot(BTBW)
plot(MAD,add=TRUE)
plot(MAD)
plot(BTBW,add=TRUE)
library(BBSshapefile)
library(BBSshapefile)
getH2map()
plot(getH2map())
library(raster)
plot(getH2map())
plot(getH2map())
mp<-getH2map()
mp
getH2map(NorthAmerica=TRUE)
library(BBSshapefile)
library(BBSshapefile)
library(raster)
BLBW<-BBSmap(SpeciesCode="BLBW")
plot(BLBW)
BLBW
plot(BLBW)
h2<-getH2map()
plot(h2,add=TRUE)
plot(readBorder(),add=TRUE)
plot(readBorders(),add=TRUE)
plot(BLBW,add=TRUE)
b<-mask(h2,BLBW)
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",snapToH2=TRUE)
OVEN<-BBSmap("OVEN",SnapToH2=TRUE)
OVEN
plot(OVEN)
m<-getBorders()
m<-readBorders()
plot(m)
plot(m)
plot(OVEN,add=TRUE)
h2<-getH2map()
plot(h2)
h2
OVEN
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",SnapToH2=TRUE)
plot(OVEN)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
plot(OVEN)
plot(OVEN)
OVEN
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
plot(OVEN)
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
plot(OVEN)
plot(OVEN)
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
plot(OVEN)
plot(getH2map(),add=TRUE)
plot(OVEN,add=TRUE)
h2<-getH2map()
overlay(OVEN,h2)
overlay(OVEN,h2,fun=function(x,y){return(x*y)})
h2
OVEN
h1<-crop(h2,OVEN)
overlay(OVEN,h1,fun=function(x,y){return(x*y)})
h1
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
h2<-getH2map()
h2
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
h2<-getH2map()
h2
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
library(BBSshapefile)
library(raster)
OVEN<-BBSmap("OVEN",MakeRaster=TRUE,RelAbun=TRUE,SnapToH2=TRUE)
OVEN
h2<-getH2map()
h2
plot(OVEN)
plot(h2)
plot(OVEN,add=TRUE)
overlay(h2,OVEN,fun=function(x,y){return(x*y)})
plot(overlay(h2,OVEN,fun=function(x,y){return(x*y)}))
library(BBSshapefile)
